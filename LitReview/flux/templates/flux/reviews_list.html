{% extends 'flux/base.html' %}

{% block content %}
   <main>
        <div class="container_button">
            <div class="button">
                <a href="{% url 'ask_for_ticket' %}">Demander une critique</a>
            </div>
            <div class="button">
                <a href="{% url 'create_a_ticket' %}">Créer une critique</a>
            </div>
        </div>
        {% for element in list_of_ticket_and_reviews %}
        <div class="container">
            {% if element.ticket %}
                <p>{{ element.user }} a publié une critique</p>
                <p>{{ element.headline }}</p>
                <p>{{ element.rating }}</p>
                <p>{{ element.body }}</p>
                <p>{{ element.time_created }}</p>
                <div class="container sub_container">
                    <p>{{ element.ticket.title }}</p>
                    <p>{{ element.ticket.description }}</p>
                    <p>{{ element.ticket.user }}</p>
                    <p>{{ element.ticket.time_created }}</p>
                </div>
            {% else %}
                <p>{{ element.user }} a demandé une critique</p>
                <p>{{ element.title }}</p>
                <p>{{ element.description }}</p>
                <p>{{ element.time_created }}</p>
                {% if not element.done %}
                    <div class="container_ticket_button">
                        <div class="ticket_button">
                            <a href="#">Créer une critique</a>
                        </div>
                    </div>
                {% endif %}
            {% endif %}
        </div>
    {% endfor %}
    </main>
{% endblock %}
