{% extends 'base.html' %}

{% block content %}
   <main>
        <div class="container_button">
            <div class="button">
                <a href="{% url 'make_a_ticket' %}">Demander une critique</a>
            </div>
            <div class="button">
                <a href="{% url 'create_a_review' %}">Créer une critique</a>
            </div>
        </div>
        {% for element in list_of_ticket_and_reviews %}
        <div class="container">
            {% if element.ticket %}
                <p>{{ element.user }} a publié une critique</p>
                <p>{{ element.headline }}</p>
                <p>{{ element.rating }}</p>
                <p>{{ element.body }}</p>
                <p>{{ element.time_created }}</p>
                <div class="container sub_container">
                    <p>{{ element.ticket.title }}</p>
                    <p>{{ element.ticket.description }}</p>
                    <p>{{ element.ticket.user }}</p>
                    <p>{{ element.ticket.time_created }}</p>
                </div>
            {% else %}
            <script>console.log("{{element.pk}}")</script>
                <p>{{ element.user }} a demandé une critique</p>
                <p>{{ element.title }}</p>
                <p>{{ element.description }}</p>
                <p>{{ element.time_created }}</p>
                {% if not element.done %}
                    <div class="container_ticket_button">
                        <div class="ticket_button">
                            <a href="{% url 'create_response_review' id=element.id %}">Créer une critique</a>
                        </div>
                    </div>
                {% endif %}
            {% endif %}
        </div>
    {% endfor %}
    </main>
{% endblock %}



<!-- pour les post /flux : passer un parametre dans l'url avec valeur par défault -->
<!-- @login required decorateur pour éviter msg erreur si deconnecté -->
<!-- class Meta ? pour les form et userfollow model  => regarder la doc sur meta class-->
<!-- installed_apps : juste le nom de l'app (authentication) ou flux.apps.config... les 2 cours django open classroom, 2 méthode differentes ?-->
<!--  creation model USer : probleme migrations obligé de tout supprimer-->
<!-- les form différents : appel au modele, ou directement les champs -->
<!-- pourquoi encore le nom de l'app en dossier dans les templates ? -->
<!-- base.html a la racine ? -->

<!-- next : créer userfollow model pour utiliser le form dans le template -->